(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(e,t,n){e.exports=n(291)},287:function(e,t,n){},291:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(85),a=n.n(o),s=n(8),c=n(11),l=n(10),u=n(137),v=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cuber";Object(l.a)(this,e),this.requestSolves=function(){return t.db.solves.orderBy("start").reverse().toArray()},this.createSolve=function(e){return t.db.solves.add(e)},this.deleteSolve=function(e){return t.db.solves.delete(e).then(function(){return e})},this.db=new u.a(n),this.db.version(1).stores({solves:"++id,start,solveTime"})},h=n(19),m=n(23),f=n(25),d=n(24),p=n(26),b=function(e){function t(){return Object(l.a)(this,t),Object(f.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"getId",value:function(){return this.get("id")}},{key:"setId",value:function(e){return this.set("id",e)}},{key:"setScramble",value:function(e){return this.set("scramble",e)}},{key:"setStart",value:function(e){return this.set("start",e)}},{key:"setInspectionTime",value:function(e){return this.set("inspectionTime",e)}},{key:"getSolveTime",value:function(){return this.get("solveTime")}},{key:"setSolveTime",value:function(e){return this.set("solveTime",e)}}],[{key:"fromJson",value:function(e){return new t(Object(h.fromJS)(e))}},{key:"build",value:function(){return new t}}]),t}(Object(h.Record)({id:null,start:null,inspectionTime:null,solveTime:null,scramble:Object(h.List)(),tags:Object(h.List)()})),g=n(141),w={F:"F2",B:"B2",U:"U2",D:"D2",L:"L2",R:"R2"},j={F:"F'",B:"B'",U:"U'",D:"D'",L:"L'",R:"R'"};var O={F:"B",B:"F",U:"D",D:"U",L:"R",R:"L"};var S=["F","B","U","D","L","R"],y=[1,2,3];function k(e){return e[Math.floor(Math.random()*e.length)]}function E(e){return S.filter(function(t){return t!==e&&t!==function(e){return O[e]}(e)})}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25;if(0===e)return[];for(var t=[k(S),k(y)],n=[t],r=1;r<e;r++)t=[k(E(t[0])),k(y)],n.push(t);return n.map(function(e){var t=Object(g.a)(e,2);return function(e,t){switch(t){case 1:return e;case 2:return w[e];case 3:return j[e];default:throw new Error("invalid (move, step)",e,t)}}(t[0],t[1])})};function T(){return Object(h.List)(I())}var x={solves:Object(h.List)(),scramble:T(),solve:b.build(),status:"idle"},C=function e(t){var n=this;Object(l.a)(this,e),this._requestSolves=function(){return n.db.requestSolves().then(function(e){return Object(h.List)(e).map(function(e){return b.fromJson(e)})})},this.requestSolves=Object(s.action)("request-solves",function(){return n._requestSolves().then(Object(s.action)(function(e){return n.solves=e,e}))}),this.requestNewScramble=Object(s.action)("request-new-scramble",function(){n.scramble=T()}),this.requestNewSolve=Object(s.action)("request-new-solve",function(){n.solve=b.build()}),this.requestStartInspecting=Object(s.action)("request-start-inspecting",function(){n.solve=n.solve.setStart(Date.now()),n.status="inspecting"}),this.tickInspection=function(){return n.solve.setInspectionTime(Date.now()-n.solve.start)},this.requestStartSolving=Object(s.action)("request-start-solving",function(){n.solve=n.tickInspection(),n.status="solving"}),this.requestStopSolving=Object(s.action)("request-stop-solving",function(){n.solve=n.tickSolve().setScramble(n.scramble),n.db.createSolve(function(e){var t=e.toJS();return delete t.id,t}(n.solve)).then(Object(s.action)(function(e){n.solves=n.solves.unshift(n.solve.setId(e)),n.scramble=T(),n.status="idle"}))}),this.tickSolve=function(){return n.solve.setSolveTime(Date.now()-(n.solve.start+n.solve.inspectionTime))},this.requestTickInspection=Object(s.action)("request-tick-inspection",function(){n.solve=n.tickInspection()}),this.requestTickSolve=Object(s.action)("request-tick-solve",function(){n.solve=n.tickSolve()}),this.requestDeleteSolve=Object(s.action)("request-delete-solve",function(e){e&&(n.db.deleteSolve(e),n.solves=n.solves.filterNot(function(t){return t.getId()===e}))}),this.db=t,Object(s.extendObservable)(this,x)},q=function e(t){var n=this;Object(l.a)(this,e),this.PATHS={"/timer":function(){return n.showTimer()},"/tutorial":function(){return n.showTutorial()}},this.showTimer=Object(s.action)("show-timer",function(){n.store.timer.requestSolves(),n.currentRoute="timer"}),this.showTutorial=Object(s.action)("show-tutorial",function(){n.currentRoute="tutorial"}),this.changeRoute=function(e){switch(e){case"timer":return n.showTimer();case"tutorial":return n.showTutorial()}},this.getPath=function(e){switch(e){case"timer":return"/timer";case"tutorial":return"/tutorial";default:return""}},this.store=t,Object(s.extendObservable)(this,{currentRoute:null,currentPath:Object(s.computed)(function(){return n.getPath(n.currentRoute)})});var r=window.location.pathname,i=this.PATHS[r];i?i():this.changeRoute("timer")},D=function e(t){Object(l.a)(this,e),this.timer=new C(t),this.routes=new q(this)},R=n(5),W=n(138),L=n.n(W),M=function(e,t){return L.a.merge({},e.style,t)},P=function(e,t,n){if(n.length>=e)return n;var r=e-n.length;return t.slice(0,1).repeat(r)+n},B=function(e){var t=Math.round(e),n=t%1e3,r=Math.floor(t/1e3),i=r%60,o=Math.floor(r/60);return P(2,"0",o.toString())+":"+P(2,"0",i.toString())+"."+P(3,"0",n.toString())},N={MONOSPACE_FONT:"Roboto Mono, monospace"},U=R.a.create({time:{fontFamily:N.MONOSPACE_FONT}}),A=function(e){var t=e.className,n=e.time,r=n?B(n):"--:--.---",o=t||Object(R.b)(U.time);return i.a.createElement("div",{className:o},r)},F=M(U.time,{fontSize:"72px",backgroundColor:"magenta"}),z=R.a.create({container:{flex:"1",padding:"20px",backgroundColor:"salmon"},primary:{display:"flex",backgroundColor:"pink",textAlign:"center",height:"100%"},secondary:{position:"fixed",top:"20px",right:"20px"},currentSolve:{display:"flex",flex:"2",flexDirection:"column",justifyContent:"space-between",backgroundColor:"cornsilk"},scramble:{backgroundColor:"grey"},solveTime:F}),K=M(U.time,{display:"inline"}),J=R.a.create({solveTime:K,deleteIcon:{cursor:"pointer"}}),H=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).deleteSolve=function(){var e=n.props,t=e.solve;(0,e.deleteSolve)(t.getId())},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.solve.getSolveTime();return i.a.createElement("div",null,i.a.createElement(A,{className:Object(R.b)(J.solveTime),time:e}),i.a.createElement("span",{className:Object(R.b)(J.deleteIcon),onClick:this.deleteSolve},"\xa0",i.a.createElement("span",{role:"img","aria-label":"remove"},"\u274c")))}}]),t}(r.Component),_=function(e){var t=e.solves,n=e.deleteSolve,r=t.slice(0,12).map(function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(H,{solve:e,deleteSolve:n}))});return i.a.createElement("ul",null,r)},V=Object(c.inject)("store")(Object(c.observer)(function(e){var t=e.store,n=t.timer.solves,r=t.timer.requestDeleteSolve;return i.a.createElement(_,{solves:n,deleteSolve:r})})),G=M(U.time,{fontSize:"72px",backgroundColor:"magenta"}),X=R.a.create({currentSolve:{display:"flex",flex:"2",flexDirection:"column",justifyContent:"space-between",backgroundColor:"cornsilk"},scramble:{backgroundColor:"grey"},timer:G,rescramble:{cursor:"pointer"}}),Y=n(33),Q=n(12),Z=n(139),$=n.n(Z),ee=n(140),te=n.n(ee),ne=$()(n(12)),re=te()(.25,.1,.25,1),ie=10066329,oe=16711680,ae=16744448,se=16777215,ce=16776960,le=Math.PI/2,ue=Math.PI,ve=(Math.PI,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.right,n=void 0===t?ie:t,r=e.left,i=void 0===r?ie:r,o=e.up,a=void 0===o?ie:o,s=e.down,c=void 0===s?ie:s,l=e.front,u=void 0===l?ie:l,v=e.back,h=void 0===v?ie:v;return[n,n,i,i,a,a,c,c,u,u,h,h]}),he=ve(),me=[ve({down:ce,left:ae,back:255}),ve({down:ce,left:ae}),ve({down:ce,left:ae,front:65280}),ve({left:ae,back:255}),ve({left:ae}),ve({left:ae,front:65280}),ve({up:se,left:ae,back:255}),ve({up:se,left:ae}),ve({up:se,left:ae,front:65280}),ve({down:ce,back:255}),ve({down:ce}),ve({down:ce,front:65280}),ve({back:255}),he,ve({front:65280}),ve({up:se,back:255}),ve({up:se}),ve({up:se,front:65280}),ve({down:ce,right:oe,back:255}),ve({down:ce,right:oe}),ve({down:ce,right:oe,front:65280}),ve({right:oe,back:255}),ve({right:oe}),ve({right:oe,front:65280}),ve({up:se,right:oe,back:255}),ve({up:se,right:oe}),ve({up:se,right:oe,front:65280})],fe=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],i=e;i<t;i+=n)r.push(i);return r},de=fe(0,9),pe=fe(18,27),be=fe(0,27,3),ge=fe(2,27,3),we=fe(6,9).concat(fe(15,18)).concat(fe(24,27)),je=fe(0,3).concat(fe(9,12)).concat(fe(18,21)),Oe=function e(t){var n=this,r=t.width,i=t.height,o=t.sides,a=void 0===o?3:o;Object(l.a)(this,e),this.turn=function(e){n.pivot=new Q.Object3D;var t,r=[],i=function(){};if(t=e.endsWith("'")?-le:e.endsWith("2")?ue:le,e.startsWith("F"))r=ge,i=function(e){n.pivot.rotation.z=-t*e};else if(e.startsWith("B"))r=be,i=function(e){n.pivot.rotation.z=t*e};else if(e.startsWith("U"))r=we,i=function(e){n.pivot.rotation.y=-t*e};else if(e.startsWith("D"))r=je,i=function(e){n.pivot.rotation.y=t*e};else if(e.startsWith("L"))r=de,i=function(e){n.pivot.rotation.x=t*e};else{if(!e.startsWith("R"))throw new Error("Unsupported move: ".concat(e));r=pe,i=function(e){n.pivot.rotation.x=-t*e}}var o=r.map(function(e){return n.cubes[e]});return n.animateTurn=i,n.turnStart=performance.now(),o.forEach(function(e){Q.SceneUtils.attach(e,n.scene,n.pivot)}),n.pivot.rotation.set(0,0,0),n.pivot.updateMatrixWorld(),n.scene.add(n.pivot),new Promise(function(e){n.finishAnimatingTurn=e}).then(function(){n.pivot.updateMatrixWorld(),n.scene.remove(n.pivot),n.turnStart=null,o.forEach(function(t){var r,i;if(t.updateMatrixWorld(),Q.SceneUtils.detach(t,n.pivot,n.scene),n.cubeContainer.add(t),e.startsWith("F"))r=[2,8,26,20],i=[5,17,23,11];else if(e.startsWith("B"))r=[0,18,24,6],i=[3,9,21,15];else if(e.startsWith("U"))r=[6,24,26,8],i=[7,15,25,17];else if(e.startsWith("D"))r=[0,2,20,18],i=[1,11,19,9];else if(e.startsWith("L"))r=[0,6,8,2],i=[1,3,7,5];else{if(!e.startsWith("R"))throw new Error("Unsupported move: ".concat(e));r=[18,20,26,24],i=[19,23,25,21]}e.endsWith("'")?(n.cycle.apply(n,Object(Y.a)(r.slice().reverse())),n.cycle.apply(n,Object(Y.a)(i.slice().reverse()))):e.endsWith("2")?(n.swap(r[0],r[2]),n.swap(r[1],r[3]),n.swap(i[0],i[2]),n.swap(i[1],i[3])):(n.cycle.apply(n,Object(Y.a)(r)),n.cycle.apply(n,Object(Y.a)(i)))})})},this.cycle=function(e,t,r,i){var o=n.cubes,a=o[e],s=o[t],c=o[r],l=o[i];o[t]=a,o[r]=s,o[i]=c,o[e]=l},this.swap=function(e,t){var r=n.cubes,i=r[e],o=r[t];r[e]=o,r[t]=i},this.animate=function(e){var t=n.renderer,r=n.scene,i=n.camera;if(n.turnStart){var o=e-n.turnStart,a=re(o/500);n.animateTurn(a),o>=500&&n.finishAnimatingTurn()}t.render(r,i)},this.getDomElement=function(){return n.renderer.domElement},this.width=r,this.height=i,this.renderer=new Q.WebGLRenderer,this.renderer.setSize(r,i),this.camera=new Q.PerspectiveCamera(75,r/i,.1,1e3),this.camera.position.z=6,this.camera.position.y=3,this.camera.position.x=3,this.camera.lookAt(new Q.Vector3(0,0,0)),new ne(this.camera,this.renderer.domElement),this.cubeContainer=new Q.Object3D,this.cubes=function(e){for(var t=[],n=e%2===0?e/2-.5:Math.floor(e/2),r=0;r<e;r++)for(var i=0;i<e;i++)for(var o=0;o<e;o++)t.push(new Q.Vector3(r-n,i-n,o-n));return t}(a).map(function(e,t){return function(e,t){for(var n=new Q.BoxGeometry(1,1,1),r=Math.min(t.length,n.faces.length),i=0;i<r;i++){var o=n.faces[i],a=t[i];o.color.setHex(a)}var s=new Q.MeshBasicMaterial({color:16777215,vertexColors:Q.FaceColors}),c=new Q.Mesh(n,s);return c.position.x=e.x,c.position.y=e.y,c.position.z=e.z,c}(e,function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:me)[e]||he}(t,function(e){return e.map(function(e){return e.slice(0)})}(me)))}),this.cubes.forEach(function(e){n.cubeContainer.add(e)}),this.scene=new Q.Scene,this.scene.add(this.cubeContainer),this.pivot=new Q.Object3D,this.animateTurn=function(){},this.finishAnimatingTurn=function(){},setTimeout(function(){["B2","D'","L","B'","D","R'","B","D2","R'","B'","L'","U'","F'","R'","U2","B","L2","B2","L'","U'","F2","U2","B'","U2","F'"].reduce(function(e,t){return e.then(function(){return n.turn(t)}).then(function(){return e=250,new Promise(function(t){setTimeout(function(){return t()},e)});var e})},Promise.resolve())},1e3)},Se=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).cube=new Oe({width:400,height:400,sides:3}),n.cacheEl=function(e){n.el=e},n.animate=function(e){n.cube.animate(e),n.animationId=window.requestAnimationFrame(n.animate)},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.animationId&&window.cancelAnimationFrame(this.animationId)}},{key:"componentDidMount",value:function(){var e=this.el,t=this.cube;e&&(e.appendChild(t.getDomElement()),this.animate(performance.now()))}},{key:"render",value:function(){return i.a.createElement("div",{ref:this.cacheEl})}}]),t}(r.Component),ye="Space",ke=1,Ee=function(e){var t=e.solve,n="inspecting"===e.status?t.inspectionTime:t.solveTime;return i.a.createElement(A,{className:Object(R.b)(X.timer),time:n})},Ie=function(e){var t=e.status;return"idle"===t?i.a.createElement("div",null,"Press and hold space to start inspecting"):"inspecting"===t?i.a.createElement("div",null,"Release space when finished inspecting"):i.a.createElement("div",null,"Press space when finished solving")},Te=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).startInspecting=function(){var e=n.props,t=e.startInspecting,r=e.tickInspection;t(),n.inspectionIntervalId=setInterval(r,ke)},n.startSolving=function(){var e=n.props,t=e.startSolving,r=e.tickSolve;n.inspectionIntervalId&&clearInterval(n.inspectionIntervalId),t(),n.solveIntervalId=setInterval(r,ke)},n.stopSolving=function(){var e=n.props.stopSolving;n.solveIntervalId&&clearInterval(n.solveIntervalId),e()},n.handleKeydown=function(e){if(e.code===ye){var t=n.props.status;"idle"===t?n.startInspecting():"solving"===t&&n.stopSolving()}},n.handleKeyup=function(e){e.code===ye&&("inspecting"===n.props.status&&n.startSolving())},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup)}},{key:"render",value:function(){var e=this.props,t=e.status,n=e.scramble,r=e.solve,o=e.onClickRefresh;return i.a.createElement("div",{className:Object(R.b)(X.currentSolve)},i.a.createElement("div",{className:Object(R.b)(X.scramble)},n.join(" "),i.a.createElement("span",{className:Object(R.b)(X.rescramble),onClick:o},"\xa0",i.a.createElement("span",{role:"img","aria-label":"rescramble"},"\ud83d\udd04"))),i.a.createElement("div",null,i.a.createElement(Ee,{status:t,solve:r}),i.a.createElement(Ie,{status:t}),i.a.createElement(Se,null)),i.a.createElement("div",null))}}]),t}(r.Component),xe=Object(c.inject)("store")(Object(c.observer)(function(e){var t=e.store,n=t.timer.solve,r=t.timer.scramble,o=t.timer.status,a=t.timer.requestNewScramble,s=t.timer.requestStartInspecting,c=t.timer.requestStartSolving,l=t.timer.requestStopSolving,u=t.timer.requestTickInspection,v=t.timer.requestTickSolve;return i.a.createElement(Te,{solve:n,scramble:r,status:o,onClickRefresh:a,startInspecting:s,startSolving:c,stopSolving:l,tickInspection:u,tickSolve:v})})),Ce=n(49),qe=(n(285),R.a.create({trend:{backgroundColor:"purple",position:"absolute",bottom:"0"}})),De=function(e){var t=e.solves,n=[];t.reverse().forEach(function(e,t){e.start&&e.solveTime&&n.push({x:e.start,y:e.solveTime/1e3})});var r=Math.max.apply(Math,Object(Y.a)(n.map(function(e){return e.y}))),o=document.body?.8*document.body.clientWidth:400;return i.a.createElement("div",{className:Object(R.b)(qe.trend)},i.a.createElement(Ce.XYPlot,{width:o,height:200,yDomain:[0,r],xType:"ordinal"},i.a.createElement(Ce.LineSeries,{data:n,strokeWidth:1}),i.a.createElement(Ce.XAxis,{tickSize:0,tickValues:[]}),i.a.createElement(Ce.YAxis,{tickSize:0})))},Re=Object(c.inject)("store")(Object(c.observer)(function(e){var t=e.store;return i.a.createElement(De,{solves:t.timer.solves.slice(0,200)})})),We=function(){return i.a.createElement("div",{className:Object(R.b)(z.container)},i.a.createElement("div",{className:Object(R.b)(z.primary)},i.a.createElement(xe,null),i.a.createElement(Re,null)),i.a.createElement("div",{className:Object(R.b)(z.secondary)},i.a.createElement(V,null)))};var Le=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){var t=n.props,r=t.target,i=t.to,o=t.routes;e.defaultPrevented||0!==e.button||r||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),o.changeRoute(i))},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.routes,n=e.to,r=e.children;return i.a.createElement("a",{onClick:this.handleClick,href:t.getPath(n)},r)}}]),t}(r.Component),Me=Object(c.inject)("store")(Object(c.observer)(function(e){var t=e.store,n=e.to,r=e.target,o=e.children,a=t.routes;return i.a.createElement(Le,{routes:a,to:n,target:r,children:o})})),Pe=function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Hello Tutorial"),i.a.createElement(Me,{to:"timer"},"Timer"))},Be=function(e){switch(e.route){case"timer":return i.a.createElement(We,null);case"tutorial":return i.a.createElement(Pe,null);default:return null}},Ne=Object(c.inject)("store")(Object(c.observer)(function(e){var t=e.store.routes.currentRoute;return i.a.createElement(Be,{route:t})}));n(287);Object(s.useStrict)(!0);var Ue=new v,Ae=new D(Ue);Object(s.autorun)(function(){var e=Ae.routes.currentPath;window.location.pathname!==e&&window.history.pushState(null,null,e)}),a.a.render(i.a.createElement(c.Provider,{store:Ae},i.a.createElement(Ne,null)),document.getElementById("root"))}},[[142,2,1]]]);
//# sourceMappingURL=main.1281e8b1.chunk.js.map